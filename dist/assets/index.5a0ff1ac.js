var $=Object.defineProperty,X=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var T=(t,r,n)=>r in t?$(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,S=(t,r)=>{for(var n in r||(r={}))M.call(r,n)&&T(t,n,r[n]);if(I)for(var n of I(r))Y.call(r,n)&&T(t,n,r[n]);return t},k=(t,r)=>X(t,J(r));var A=(t,r)=>{var n={};for(var s in t)M.call(t,s)&&r.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&I)for(var s of I(t))r.indexOf(s)<0&&Y.call(t,s)&&(n[s]=t[s]);return n};import{a as L,R as e,r as l,C as P,b as j,F as x,c as B,T as d,S as m,B as f,d as v,e as G,f as _,I as h,D,G as Q,H as R,L as F,g as q,t as K,h as Z,i as V,j as ee,k as te,l as z}from"./vendor.0c96cb11.js";const re=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}};re();const ne="https://coding-challenge-api.aerolab.co/user/me",oe="https://coding-challenge-api.aerolab.co/products",ae="https://coding-challenge-api.aerolab.co/user/history",se="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MjA1YTdjNTkzZWE4NDAwMjFkMGRhZjEiLCJpYXQiOjE2NDQ1Mzc3OTd9.6OIJdhttD0IY0LwYkkDG53gjpnryKHIgG-LiR4ieur4",C={"Content-Type":"application/json",Accept:"application/json",Authorization:se},ce=L.get(ne,{headers:C}),ie=L.get(oe,{headers:C}),le=L.get(ae,{headers:C}),O=e.createContext({}),de=({children:t})=>{const[r,n]=l.exports.useState({}),[s,o]=l.exports.useState(!0);if(!r&&s)return e.createElement(P,{padding:12},e.createElement(j,{isIndeterminate:!0,color:"primary.500"}));l.exports.useEffect(()=>{try{ce.then(a=>n(a.data)).catch(a=>console.log(a)),o(!1)}catch(a){console.log(a)}},[]);const c=a=>{fetch("https://coding-challenge-api.aerolab.co/user/points",{method:"POST",mode:"cors",cache:"no-cache",headers:C,referrerPolicy:"same-origin",body:JSON.stringify({amount:a})}),n(k(S({},r),{points:r.points+a}))},i=a=>{if(!r)return;const g="https://coding-challenge-api.aerolab.co/redeem";var p={productId:a._id};fetch(g,{method:"POST",mode:"cors",cache:"no-cache",headers:C,referrerPolicy:"same-origin",body:JSON.stringify(p)}),n(k(S({},r),{redeemHistory:[...r.redeemHistory,a._id],points:r.points-a.cost}))},E={user:r},u={addPoints:a=>c(a),redeem:i};return e.createElement(O.Provider,{value:{state:E,actions:u}},t)},me=({children:t})=>e.createElement(x,{direction:"column",backgroundColor:"gray.100",flex:1},e.createElement(P,{paddingY:3},e.createElement(B,{maxWidth:"6xl"},t)));var b;(function(t){t.MostRecent="Most Recent",t.LowestPrice="Lowest Price",t.HighestPrice="Highest Price"})(b||(b={}));const H=({current:t,total:r})=>e.createElement(d,{color:"gray.500",fontWeight:"bold",paddingX:1},t," of ",r," products"),ue=[b.MostRecent,b.LowestPrice,b.HighestPrice],ge=({active:t,onChange:r})=>e.createElement(m,{alignItems:"center",direction:"row",spacing:6},e.createElement(d,{color:"gray.500"},"Sort by: "),e.createElement(m,{direction:"row",spacing:4},ue.map(n=>e.createElement(f,{key:n,backgroundColor:n===t?"primary.400":"gray.100",borderRadius:9999,color:n===t?"white":"gray.600",cursor:"pointer",fontWeight:"500",paddingX:6,paddingY:2,onClick:()=>r(n)},n)))),N=({currentPage:t,totalPages:r,paginate:n})=>e.createElement(x,{fontSize:"4xl",justifyContent:"flex-end",flex:1,paddingX:6},e.createElement(v,{fontSize:"4xl",paddingX:0,disabled:!(t>1),onClick:()=>n(t-1)},e.createElement(G,{style:{margin:"0 5px"}})),e.createElement(v,{fontSize:"4xl",paddingX:0,disabled:!(t<r),onClick:()=>n(t+1)},e.createElement(_,{style:{margin:"0 5px"}})));var w="/assets/coin.b471c109.svg";const pe=n=>{var s=n,{product:t}=s,r=A(s,["product"]);const[o,c]=l.exports.useState(!1),{state:{user:i},actions:{redeem:E}}=l.exports.useContext(O),u=i.points,a=t.cost<=u,g=()=>{if(a)return E(t)};return e.createElement(f,k(S({},r),{backgroundColor:"white",borderRadius:"sm",boxShadow:"md",padding:6,position:"relative",cursor:a?"pointer":"not-allowed",opacity:a?1:.5,onClick:()=>c(!o)}),e.createElement(m,{spacing:3},e.createElement(m,{alignItems:"center",backgroundColor:"white",borderRadius:9999,borderColor:a?"primary.500":"orange.500",borderWidth:1,color:a?"primary.500":"orange.500",direction:"row",fontSize:"sm",fontWeight:"500",justifyContent:"center",paddingX:3,paddingY:1,position:"absolute",right:6,spacing:2,top:6},e.createElement(d,null,a?t.cost:`Missing ${t.cost-u} points`),e.createElement(h,{src:w,width:4,height:4})),e.createElement(P,null,e.createElement(h,{objectFit:"contain",src:t.img.url,width:64})),e.createElement(D,null),e.createElement(m,{alignItems:"flex-start",spacing:0},e.createElement(d,{color:"gray.500",fontSize:"sm"},t.category),e.createElement(d,{fontWeight:"500"},t.name))),o&&e.createElement(x,{alignItems:"center",borderRadius:"sm",height:"100%",justifyContent:"center",position:"absolute",left:0,top:0,width:"100%",zIndex:2},e.createElement(f,{backgroundColor:a?"primary.500":"gray.500",borderRadius:"sm",height:"100%",left:0,opacity:.9,position:"absolute",top:0,width:"100%"}),e.createElement(m,{color:"white",fontSize:"2xl",fontWeight:"bold",spacing:6,zIndex:3},e.createElement(m,{spacing:0},e.createElement(d,null,"You have: ",u),e.createElement(d,{borderBottomColor:"white",borderBottomWidth:2},"Cost: ",t.cost),e.createElement(d,null,"Left: ",u-t.cost)),a&&e.createElement(v,{color:"primary.500",onClick:g},"Redeem Now"))))},U=({products:t})=>e.createElement(Q,{marginTop:2,gap:6,templateColumns:"repeat(auto-fill, minmax(256px, 1fr))",width:"100%"},t.map(r=>e.createElement(pe,{key:`product-${r._id}`,product:r}))),he=({products:t,totalProducts:r,currentPage:n,productsPerPage:s,setCurrentPage:o})=>{const c=Math.ceil(r/s),[i,E]=l.exports.useState(b.MostRecent),u={"Highest Price":[...t].sort((p,y)=>y.cost-p.cost),"Lowest Price":[...t].sort((p,y)=>p.cost-y.cost),"Most Recent":t},a=e.useMemo(()=>u[i],[i,t]),g=p=>o(p);return e.createElement(m,{alignItems:"flex-start",spacing:6},e.createElement(m,{alignItems:"center",as:"nav",flexDirection:"row",flex:1,spacing:6,width:"100%",divider:e.createElement(D,{borderColor:"gray.300",height:12,orientation:"vertical"})},e.createElement(H,{current:n*a.length,total:r}),e.createElement(ge,{active:i,onChange:E}),e.createElement(N,{currentPage:n,totalPages:c,paginate:g})),e.createElement(U,{products:a}),e.createElement(x,{justifyContent:"space-between",width:"100%"},e.createElement(H,{current:n*a.length,total:r}),e.createElement(N,{currentPage:n,totalPages:c,paginate:g})))};var Ee="/assets/apiError.c47cf9a5.png";const W=()=>e.createElement(e.Fragment,null,e.createElement(R,{fontSize:"3xl",paddingY:2,color:"gray.500"},"It seems there was an error, try again later."),e.createElement(h,{src:Ee,width:"500px",height:"500px",margin:"0 auto"}));var fe="/assets/banner.ce3ca7ef.png";const ye=()=>{const[t,r]=l.exports.useState([]),[n,s]=l.exports.useState(!0),[o,c]=l.exports.useState(!1),[i,E]=l.exports.useState(1),[u]=l.exports.useState(16),a=i*u,g=a-u,p=t.slice(g,a);return l.exports.useEffect(()=>{setTimeout(()=>{ie.then(y=>{r(y.data),s(!1)}).catch(y=>{s(!1),c(!0)})},1e3)},[]),e.createElement(e.Fragment,null,n&&e.createElement(x,{alignItems:"center",justifyContent:"center",paddingY:12},e.createElement(j,{isIndeterminate:!0,color:"primary.500"})),!n&&!o&&e.createElement(m,{flex:1,spacing:6},e.createElement(x,{alignItems:"flex-end",backgroundImage:`url(${fe})`,backgroundSize:"cover",borderRadius:"md",justifyContent:"flex-start",minHeight:64,padding:6},e.createElement(R,{color:"white",fontSize:"4xl"},"Electronics")),e.createElement(he,{products:p,totalProducts:t.length,currentPage:i,productsPerPage:u,setCurrentPage:E})),!n&&o&&e.createElement(W,null))};var xe="/assets/logo.ca5f8d57.svg";const be=()=>{const{state:{user:t},actions:{addPoints:r}}=l.exports.useContext(O),[n,s]=l.exports.useState(!1),[o,c]=l.exports.useState(1e3),i=()=>{s(!n)};return t?e.createElement(f,{backgroundColor:"white",boxShadow:"md"},e.createElement(B,{maxWidth:"6xl",position:"relative"},e.createElement(m,{alignItems:"center",as:"nav",direction:"row",justifyContent:"space-between",paddingY:3},e.createElement(F,{to:"/"},e.createElement(h,{height:8,width:8,src:xe})),e.createElement(m,{alignItems:"center",color:"gray.500",direction:"row",spacing:3},e.createElement(F,{to:"/redeem-history"},e.createElement(d,{textDecoration:"underline",_hover:{color:"primary.500"}},"My redeemed products")),e.createElement(d,null,t.name),e.createElement(m,{alignItems:"center",backgroundColor:"gray.100",borderRadius:9999,cursor:"pointer",direction:"row",paddingX:3,paddingY:2,onClick:()=>i()},e.createElement(d,{fontWeight:"500"},t.points),e.createElement(h,{height:6,width:6,src:w})),n&&e.createElement(m,{marginLeft:10,padding:2,borderRadius:"md",position:"absolute",right:"0",bottom:"-150px",width:"150px",backgroundColor:"white"},e.createElement(f,{cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:`${o===1e3?"gray.100":"white"}`},e.createElement(d,{onClick:()=>c(1e3)},"1000"),e.createElement(h,{src:w,height:6,width:6})),e.createElement(f,{cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:`${o===5e3?"gray.100":"white"}`},e.createElement(d,{onClick:()=>c(5e3)},"5000"),e.createElement(h,{src:w,height:6,width:6})),e.createElement(f,{cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:`${o===7500?"gray.100":"white"}`},e.createElement(d,{onClick:()=>c(7500)},"7500"),e.createElement(h,{src:w,height:6,width:6})),e.createElement(v,{onClick:()=>r(o),color:"primary.500"},"Add points!")))))):null},Ce=()=>{const[t,r]=l.exports.useState([]),[n,s]=l.exports.useState(!1),[o,c]=l.exports.useState(!1);return l.exports.useEffect(()=>{s(!0),setTimeout(()=>{le.then(i=>{r(i.data),s(!1)}).catch(i=>{s(!1),c(!0)})},1e3)},[]),e.createElement(e.Fragment,null,n&&!t.length&&e.createElement(P,{padding:12},e.createElement(j,{isIndeterminate:!0,color:"primary.500"})),!n&&!t.length&&e.createElement(e.Fragment,null,e.createElement(R,{paddingY:2,color:"gray.500",fontSize:"4xl"},"You dont have any redeemed product"),e.createElement(F,{to:"/",style:{textDecoration:"underline",color:"red"}},"Add some")),!n&&t.length>0&&e.createElement(e.Fragment,null,e.createElement(R,{paddingY:2,color:"gray.500",fontSize:"4xl"},"Your redeemed products"),e.createElement(U,{products:t})),!n&&o&&e.createElement(W,null))};var we="/assets/notFound.5534bb75.png";const Ie=()=>e.createElement(h,{margin:"0 auto",height:"500px",width:"500px",src:we,alt:"Error, page not found"});var Se=q({colors:{primary:K.colors.orange}});Z.render(e.createElement(V,{theme:Se},e.createElement(de,null,e.createElement(me,null,e.createElement(ee,null,e.createElement(be,null),e.createElement(te,null,e.createElement(z,{path:"/",element:e.createElement(ye,null)}),e.createElement(z,{path:"/redeem-history",element:e.createElement(Ce,null)}),e.createElement(z,{path:"*",element:e.createElement(Ie,null)})))))),document.getElementById("root"));
